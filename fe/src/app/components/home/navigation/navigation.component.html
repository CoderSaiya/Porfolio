<nav class="nav nav--desktop">
  <div class="nav__wrap">
    <button *ngFor="let item of navItems" (click)="scrollTo(item.id)" class="nav__btn"
      [class.nav__btn--active]="activeSection===item.id">
      {{ item.label }}
    </button>

    <div class="nav__divider"></div>

    <button *ngFor="let item of routeItems" (click)="navigateTo(item.route!)" class="nav__btn nav__btn--route">
      {{ item.label }}
    </button>

    <div class="nav__profile" *ngIf="user">
      <button (click)="showProfileMenu = !showProfileMenu" class="nav__btn nav__profile-btn">
        <img [src]="user.avatarUrl || 'assets/default-avatar.png'" class="nav__avatar" alt="Avatar">
        <span class="nav__username">{{ user.fullName || user.username }}</span>
      </button>

      <div *ngIf="showProfileMenu" class="nav__dropdown">
        <div class="nav__dropdown-header">
          <p class="nav__dropdown-name">{{ user.fullName || user.username }}</p>
          <p class="nav__dropdown-role">{{ user.role }}</p>
        </div>

        <button *ngIf="user.role === 'Admin'" (click)="navigateTo('/admin')" class="nav__dropdown-item">
          <lucide-icon name="shield" class="nav__icon-sm"></lucide-icon> Admin
        </button>

        <button (click)="navigateTo('/settings')" class="nav__dropdown-item">
          <lucide-icon name="user" class="nav__icon-sm"></lucide-icon> Settings
        </button>

        <button (click)="logout()" class="nav__dropdown-item nav__dropdown-item--danger">
          <lucide-icon name="log-out" class="nav__icon-sm"></lucide-icon> Logout
        </button>
      </div>
    </div>

    <div class="nav__actions">
      <a href="https://www.buymeacoffee.com/codersaiya" target="_blank" class="nav__coffee"
        aria-label="Buy me a coffee">
        <lucide-icon name="Coffee"></lucide-icon>
        <span>Coffee</span>
      </a>

      <button class="nav__themeToggle" (click)="toggleTheme()" aria-label="Toggle theme">
        <lucide-icon [name]="themeService.isDark() ? 'Sun' : 'Moon'"></lucide-icon>
      </button>
    </div>
  </div>
</nav>

<nav class="nav nav--mobile">
  <div class="nav__mobileTop">
    <a href="https://www.buymeacoffee.com/codersaiya" target="_blank" class="nav__coffee nav__coffee--mobile"
      aria-label="Buy me a coffee">
      <lucide-icon name="Coffee"></lucide-icon>
    </a>

    <button class="nav__themeToggle" (click)="toggleTheme()" aria-label="Toggle theme">
      <lucide-icon [name]="themeService.isDark() ? 'Sun' : 'Moon'"></lucide-icon>
    </button>

    <button class="nav__toggle" (click)="isOpen=!isOpen">
      <lucide-icon [name]="isOpen ? 'X' : 'Menu'"></lucide-icon>
    </button>
  </div>
  <div class="nav__sheet" *ngIf="isOpen">
    <button *ngFor="let item of navItems; index as i" (click)="scrollTo(item.id)"
      class="nav__sheetBtn stagger-animation" [style.--stagger]="i"
      [class.nav__sheetBtn--active]="activeSection===item.id">
      <lucide-icon [name]="item.icon"></lucide-icon>
      <span>{{ item.label }}</span>
    </button>

    <div class="nav__sheet-divider"></div>

    <button *ngFor="let item of routeItems; index as i" (click)="navigateTo(item.route!)"
      class="nav__sheetBtn nav__sheetBtn--route stagger-animation" [style.--stagger]="navItems.length + i">
      <lucide-icon [name]="item.icon"></lucide-icon>
      <span>{{ item.label }}</span>
    </button>

    <ng-container *ngIf="user">
      <div class="nav__sheet-divider"></div>

      <div class="nav__mobile-profile">
        <img [src]="user.avatarUrl || 'assets/default-avatar.png'" class="nav__mobile-avatar" alt="Avatar">
        <div class="nav__mobile-info">
          <p class="nav__mobile-name">{{ user.fullName || user.username }}</p>
          <p class="nav__mobile-role">{{ user.role }}</p>
        </div>
      </div>

      <button *ngIf="user.role === 'Admin'" (click)="navigateTo('/admin')" class="nav__sheetBtn stagger-animation"
        [style.--stagger]="navItems.length + 1">
        <lucide-icon name="shield"></lucide-icon>
        <span>Admin</span>
      </button>

      <button (click)="navigateTo('/settings')" class="nav__sheetBtn stagger-animation"
        [style.--stagger]="navItems.length + 2">
        <lucide-icon name="user"></lucide-icon>
        <span>Settings</span>
      </button>

      <button (click)="logout()" class="nav__sheetBtn nav__sheetBtn--danger stagger-animation"
        [style.--stagger]="navItems.length + 3">
        <lucide-icon name="log-out"></lucide-icon>
        <span>Logout</span>
      </button>
    </ng-container>
  </div>
</nav>